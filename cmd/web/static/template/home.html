
<script>
window.onload = function() {
  updateTransactions();
};

 function updateTransactions() {
    var resp = httpGet("https://us-central1-spookystore-18.cloudfunctions.net/count-transaction");
    document.getElementById("transactions").innerHTML = resp; 
    console.log("updated transactions counter")
}
</script>
{{define "title"}}SpookyStore{{end}}

{{define "body"}}
<div class="product-grid">
    {{range $i, $p := .products}}
    <div class="mdl-card mdl-shadow--2dp demo-card-square">
            <div class="mdl-card__title mdl-card__accent mdl-card--expand" style=" background: url('{{$p.PictureURL}}') center / cover;">
                
            </div>

            <div class="mdl-card__supporting-text">
                    <h6><b>{{ $p.DisplayName }}</b></h6>
                    <p>{{ $p.Description }}</p>
                    <p>
                        <b>${{printf "%.2f" $p.Cost}} </b>
                        {{ if $.me}}
                        <button class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored" onclick="httpGet('/addproduct/{{$.me.ID}}/{{ $p.ID }}'); markDone('{{ $p.ID }}')"><i id="{{ $p.ID }}"  class="material-icons">add</i> </button>
                        {{ end }}
                    </p>
            </div>
         </div>
    {{end}}
</div>
    <div class="transaction-div" class="mdl-card__supporting-text"> 
        {{ if .numTransactions }}
     <p >Thank you for visiting the Spooky Store! Since our founding in 2018, we have processed over <b>{{ .numTransactions }}</b> orders. 
       We are happy to serve all of your Autumn needs! Check back often for new products.</p>
     </p>
     {{ end }}
    </div>
{{end}}